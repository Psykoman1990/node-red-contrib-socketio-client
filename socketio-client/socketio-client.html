<!-- Config -->
  <script type="text/javascript">
    "use strict";
    /*global RED*/
    RED.nodes.registerType('socketio-config', {
      category: 'config',
      defaults: {
        host: {
          value: "http://localhost",
          required: true
        },
        port: {
          value: "",
          required: false,
          validate: RED.validators.number()
        }
      },
      label: function() {
        return this.host + ":" + this.port;
      }
    });
  </script>

  <script type="text/x-red" data-template-name="socketio-config">
    <div class="form-row">
      <label for="node-config-input-host"><i class="fa fa-globe"></i> Host</label>
      <input type="text" id="node-config-input-host">
    </div>
    <div class="form-row">
      <label for="node-config-input-port"><i class="fa fa-server"></i> Port</label>
      <input type="text" id="node-config-input-port">
    </div>
  </script>

<!-- Connector -->
  <script type="text/javascript">
    /*global RED*/
    RED.nodes.registerType('socketio-connector', {
      category: 'input',
      outputs: 1,
      color: "#D8BFD8",
      icon: "socketio.png",
      paletteLabel: "socketio connector",
      defaults: {
        server: {
          value: "",
          type: "socketio-config"
        },
        namespace: {
          value: "",
          required:false
        },/*,
        outputs: {value:1},*/
        name: {
          value: ""
        }
      },
      label: function() {
          return this.name || "Socket.IO Connector";
      },
      oneditprepare: function() {
        var that = this;
        /*$( "#node-input-outputs" ).spinner({
            min:1
        });*/

        /*this.editor = RED.editor.createEditor({
            id: 'node-input-func-editor',
            mode: 'ace/mode/javascript',
            value: $("#node-input-func").val(),
            globals: {
                msg:true,
                context:true,
                RED: true,
                util: true,
                flow: true,
                global: true,
                console: true,
                Buffer: true,
                setTimeout: true,
                clearTimeout: true,
                setInterval: true,
                clearInterval: true
            }
        });

        RED.library.create({
            url:"functions", // where to get the data from
            type:"function", // the type of object the library is for
            editor:this.editor, // the field name the main text body goes to
            mode:"ace/mode/javascript",
            fields:['name','outputs']
        });
        this.editor.focus();*/
      },
    });
  </script>

  <script type="text/x-red" data-template-name="socketio-connector">
    <div class="form-row">
      <label for="node-input-server"><i class="fa fa-globe"></i> Server</label>
      <input type="text" id="node-input-server" placeholder="Server">
    </div>
    <div class="form-row">
      <label for="node-input-namespace"><i class="icon-tasks"></i> namespace</label>
      <input type="text" id="node-input-namespace" placeholder="Namespace">
    </div>
   <!--  <div class="form-row">
        <label for="node-input-outputs"><i class="fa fa-random"></i> <span data-i18n="function.label.outputs"></span></label>
        <input id="node-input-outputs" style="width: 60px;" value="1">
    </div> -->
    <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Name">
    </div>
  </script>

  <script type="text/x-red" data-help-name="socketio-connector">
    <p>Socket.IO Connector</p>
  </script>

<!-- Listener -->
  <script type="text/javascript">
    /*global RED*/
    RED.nodes.registerType('socketio-listener', {
      category: 'function',
      inputs: 1,
      outputs: 1,
      color: "#D8BFD8",
      icon: "socketio.png",
      paletteLabel: "socketio listener",
      defaults: {
        eventname: {
          value: "",
          required: true
        },
        name: {
          value: ""
        }
      },
      label: function() {
          return ( this.name || this.eventname ) || "Socket.IO listener";
      }
    });
  </script>

  <script type="text/x-red" data-template-name="socketio-listener">
    <div class="form-row">
      <label for="node-input-eventname"><i class="icon-tasks"></i> Event Name</label>
      <input type="text" id="node-input-eventname" placeholder="Event Name">
    </div>
    <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Name">
    </div>
  </script>

  <script type="text/x-red" data-help-name="socketio-listener">
      <p>Socket.IO Listener</p>
  </script>

